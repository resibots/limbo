

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parameters &mdash; limbo 0.1 documentation</title>
  

  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  

  
    <link rel="top" title="limbo 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Guides" href="index.html"/>
        <link rel="next" title="Implementation details &amp; customization of algorithms" href="general_concepts.html"/>
        <link rel="prev" title="Using Limbo as an environment for experiments" href="framework.html"/>
<style type="text/css">
/* This CSS displays small logos at the bottom of the page, on one line */

.wy-footer-logo-container {
  margin-top: 50px;
  text-align: center;
}

.wy-footer-logo {
  display: inline-block;
  width: 60px;
}
</style>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
          

          
            <a href="https://resibots.eu">
          

          
            
            <img src="../_static/resibots_logo_black_200px.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="resibots-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
                  <a class="caption" href="http://www.resilient-robots.net">Project's website</a>
              
            

            
            
                <p class="caption"><span class="caption-text">Limbo (BO library)</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Limbo&#8217;s documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html">Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="bo.html">Introduction to Bayesian Optimization (BO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="limbo_concepts.html">Limbo-specific concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="framework.html">Using Limbo as an environment for experiments</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_concepts.html">Implementation details &amp; customization of algorithms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>

            

            
            
              
                <a class="caption" href="http://github.com/resibots">github</a>
              
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">limbo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Limbo</a> &raquo;</li>
    
      <li><a href="index.html">Guides</a> &raquo;</li>
    
    <li>Parameters</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/guides/parameters.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parameters">
<span id="params-guide"></span><h1>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">Â¶</a></h1>
<p>Bayesian Optimization algorithms, acquisition functions, etc. all have many parameters. The traditionnal approach is to use a configuration file (e.g. XML, or json, .ini, ...). However,  each time a developer adds a parameter, some code has to be added to parse the configuration file: there is often more code to parse and check the configuration file than <em>real code</em> (that is, code that actually does something). As a result, scientists often either skip this part until they have  &#8220;final&#8221; version of their code (often, never), or do it in a &#8220;quick and dirty way&#8221; (e.g. without checking the syntax, without checking that the parameter value is in the right range, etc.).</p>
<p>Put differently, using a configuration file is nice for the user, but not for the developer. Since <strong>limbo</strong> is targeted to scientists who want to <em>easily</em> test  new code, we need a way to separate parameters from code that do not require any boilerplate code.</p>
<p>In <strong>limbo</strong>, every class takes a structure name (usually called <code class="docutils literal"><span class="pre">Params</span></code>) that contains the parameters. By doing so, we rely on the compiler to check the types, and we require very little work to separate parameters values from algorithms.</p>
<p>From the user&#8217;s point of view, this looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>struct Params {
  struct ucb {
    BO_PARAM(float, alpha, 0.1);
  };
};
// ...
// ... instantiate an optimizer:
bayes_opt::BOptimizer&lt;Params&gt; opt;
</pre></div>
</div>
<p>(do not forget the semi-colons!). This structure says that the value of the parameter <code class="docutils literal"><span class="pre">alpha</span></code> for the class &#8220;UCB&#8221; is <code class="docutils literal"><span class="pre">0.1</span></code>.</p>
<p>In the UCB class, the value can be accessed like this:</p>
<div class="highlight-python"><div class="highlight"><pre>float x = Params::ucb::alpha();
</pre></div>
</div>
<p>No need to write any parsing code!</p>
<p>Many limbo classes provide default parameters. To use them, the parameter sub-structure has to inherit from the default structure:</p>
<div class="highlight-python"><div class="highlight"><pre>struct Params {
  struct ucb : public defaults::ucb {
  };
};
</pre></div>
</div>
<p>That way, the <code class="docutils literal"><span class="pre">ucb::alpha()</span></code> exists, but it has its default value.</p>
<p>Sometimes, we need to define parameters that can be changed at runtime. In that case, we can use a <code class="docutils literal"><span class="pre">BO_DYN_PARAM</span></code> instead of a <code class="docutils literal"><span class="pre">BO_PARAM</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>struct Params {
  struct ucb {
    BO_DYN_PARAM(float, alpha, 0.1);
  };
};
</pre></div>
</div>
<p>However, for dynamic parameters, we need to call <code class="docutils literal"><span class="pre">BO_DECLARE_DYN_PARAM</span></code> in our <code class="docutils literal"><span class="pre">.cpp</span></code> file (typically, just before the main function):</p>
<div class="highlight-python"><div class="highlight"><pre>BO_DECLARE_DYN_PARAM(int, Params::ucb, alpha);
</pre></div>
</div>
<p><strong>Warning!</strong> Dynamic parameters are not thread-safe! (standard parameters are thread safe and add no overhead &#8211; they are equivalent to writing a constant).</p>
<p>Last, we can also use arrays, Eigen vectors, and strings as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>struct Params {
    struct test {
        BO_PARAM(double, a, 1);
        BO_DYN_PARAM(int, b);
        BO_PARAM_ARRAY(double, c, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0);
        BO_PARAM_VECTOR(double, d, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0);
        BO_PARAM_STRING(e, &quot;e&quot;);
    };
};
BO_DECLARE_DYN_PARAM(int, Params::test, b);
</pre></div>
</div>
<p>All these macros are defined in <code class="docutils literal"><span class="pre">tools/macros.hpp</span></code>.</p>
<p>In some rare cases, you may have 2 different instances of the same algorithm, for example, if you choose to use the same optimizer for the acquisition optimization and the GP hyperparametrs optimization.  In such cases, you may also wish to set different parameters for each instance. This can be easily accomplished in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre>struct Params {
  // All the other parameters
}

struct ParamsAcquiOpt {
    struct cmaes {
        BO_PARAM(int, nrestarts, 10);
        BO_PARAM(int, max_fun_evals, 500);
    };
};

struct ParamsGPOpt {
    struct cmaes {
        BO_PARAM(int, nrestarts, 1);
        BO_PARAM(int, max_fun_evals, 200);
    };
};
</pre></div>
</div>
<p>Then, when declaring the types to use:</p>
<div class="highlight-python"><div class="highlight"><pre>typedef opt::Cmaes&lt;ParamsAcquiOpt&gt; Acqui_opt_t;
typedef opt::Cmaes&lt;ParamsGPOpt&gt; Gp_opt_t;

typedef kernel::MaternFiveHalfs&lt;Params&gt; Kernel_t;
typedef mean::Data&lt;Params&gt; Mean_t;
typedef model::GP&lt;Params, Kernel_t, Mean_t, model::gp::KernelLFOpt&lt;Params, Gp_opt_t&gt;&gt; GP_t;
typedef acqui::UCB&lt;Params, GP_t&gt; Acqui_t;

bayes_opt::BOptimizer&lt;Params, modelfun&lt;GP_t&gt;, acquifun&lt;Acqui_t&gt;, acquiopt&lt;Acqui_opt_t&gt;&gt; opt;
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="general_concepts.html" class="btn btn-neutral float-right" title="Implementation details &amp; customization of algorithms" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="framework.html" class="btn btn-neutral" title="Using Limbo as an environment for experiments" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="wy-footer">
    <div role="contentinfo">
      <p>
          &copy; Copyright 2014-2015, UPMC/Inria.

      
      
        <br/>
        <a href="mailto:jean-baptiste.mouret@inria.fr"> Contact us </a>
      
      </p>
    </div>
    <div class="wy-footer-aside">
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> modified for <a href="http://resibots.eu">Resibots</a>.
    </div>
    <div style="clear: both;"></div>
  </div>
<div class="wy-footer-logo-container">
  <div class="wy-footer-logo"><img src="../_static/logos/logo_eu.png"/></div>
  <div class="wy-footer-logo"><img src="../_static/logos/logo_erc_nonofficial.svg"/></div>
  <div class="wy-footer-logo"><img src="../_static/logos/logo_loria.jpg"/></div>
  <div class="wy-footer-logo"><img src="../_static/logos/logo-inria.svg"/></div>
  <div class="wy-footer-logo"><img src="../_static/logos/logo_cnrs.png"/></div>
  <div class="wy-footer-logo"><img src="../_static/logos/logo_universite_lorraine.jpg"/></div>
</div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxResibotsTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>